<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Downdetector's Downdetector's Downdetector's Downdetector's Downdetector</title>

<style>
:root{
  --bg:#070b12;
  --card:#0d1422;
  --line:#1e2a3d;
  --text:#e5e7eb;
  --muted:#93a4b8;
  --up:#22c55e;
  --down:#ef4444;
  --unk:#f59e0b;
}
body{
  margin:0;
  font-family:system-ui,Segoe UI,Roboto;
  background:var(--bg);
  color:var(--text);
}
.wrap{
  max-width:800px;
  margin:auto;
  padding:40px 20px;
}
.card{
  border:1px solid var(--line);
  background:var(--card);
  border-radius:18px;
  padding:20px;
}
h1{margin:0 0 10px}
.big{
  display:flex;
  align-items:center;
  gap:12px;
  padding:16px;
  border-radius:14px;
  background:#0003;
  border:1px solid #fff1;
  margin:20px 0;
}
.dot{
  width:16px;
  height:16px;
  border-radius:999px;
}
.dot.up{background:var(--up)}
.dot.down{background:var(--down)}
.dot.unk{background:var(--unk)}
button{
  background:#1a2235;
  color:white;
  border:1px solid #2a3856;
  padding:10px 14px;
  border-radius:10px;
  cursor:pointer;
}
button:hover{background:#223055}
.log{
  font-family:monospace;
  font-size:12px;
  background:#0005;
  padding:10px;
  border-radius:10px;
  height:120px;
  overflow:auto;
}
</style>
</head>

<body>
<div class="wrap">
<div class="card">

<h1>Is Downdetector's Downdetector's Downdetector's Downdetector down?</h1>
<p>
Checking:
https://downdetectorsdowndetectorsdowndetectorsdowndetector.com
</p>

<div class="big">
<span class="dot unk" id="dot"></span>
<div>
<b id="status">UNKNOWN</b>
<div id="sub">Waiting for check…</div>
</div>
</div>

<button onclick="run()">Check now</button>

<p>Last check: <span id="last">—</span></p>

<div class="log" id="log">Ready.</div>

</div>
</div>

<script>

const CHECK_ENDPOINT =
"https://downdetectorsdowndetectorsdowndetectorsdowndetectorsdowndetecto.bezau2.workers.dev/";

const dot = document.getElementById("dot");
const status = document.getElementById("status");
const sub = document.getElementById("sub");
const log = document.getElementById("log");
const last = document.getElementById("last");

function write(msg){
  log.textContent = "["+new Date().toLocaleTimeString()+"] "+msg+"\n"+log.textContent;
}

function setState(s,text){
  dot.className = "dot "+s;
  status.textContent = s.toUpperCase();
  sub.textContent = text;
}

async function run(){
  last.textContent = new Date().toLocaleString();
  setState("unk","Checking via Worker…");
  write("Checking…");

  try{
    const r = await fetch(CHECK_ENDPOINT,{cache:"no-store"});
    const j = await r.json();

    write(JSON.stringify(j));

    if(j.ok){
      setState("up","HTTP "+j.status+" in "+j.latency+"ms");
    }else{
      setState("down","HTTP "+j.status+" ("+j.latency+"ms)");
    }

    if(j.error){
      write("Error: "+j.error);
    }

  }catch(e){
    write("Worker unreachable: "+e);
    setState("unk","Worker unreachable");
  }
}

run();
setInterval(run,30000);

</script>
</body>
</html>
